CREATE DATABASE AnhVanCenter
GO
USE AnhVanCenter
GO
CREATE TABLE HOCVIEN
(
ID_HV INT NOT NULL PRIMARY KEY,
TEN_HV NVARCHAR(100),
GT BIT,
Address NVARCHAR(500),
SDT_HV VARCHAR (12),
NgSinh date,
Email NVARCHAR(50)
)

CREATE TABLE NHANVIEN
(
ID_NV INT NOT NULL PRIMARY KEY,
TEN_NV NVARCHAR(100),
GT BIT,
Address NVARCHAR(500),
SDT_NV VARCHAR (12),
NgSinh date,
Email NVARCHAR(50),
Kinhnghiem char(3)
)

CREATE TABLE NguoiThanHV
(
ID_NTHV INT NOT NULL PRIMARY KEY,
TEN_NTHV NVARCHAR(100),
GT BIT,
Address NVARCHAR(500),
SDT_NTHV VARCHAR (12),
)

CREATE TABLE ChiNhanh
(
ID_CN INT NOT NULL PRIMARY KEY,
TEN_CN NVARCHAR(100),
Address NVARCHAR(500),
SoLuongNhanVien CHAR (5),
)

CREATE TABLE PhongHoc
(
ID_PH INT NOT NULL PRIMARY KEY,
SoPhong NVARCHAR(100),
TinhTrang VARCHAR (50),
SoGhe CHAR(10)
)

CREATE TABLE ChucVu
(
ID_Job INT NOT NULL PRIMARY KEY,
TEN_Job NVARCHAR(100),
SoLuongNhanVien CHAR (5),
)

CREATE TABLE ChuongTrinhHoc
(
ID_CTH INT NOT NULL PRIMARY KEY,
TEN_CTH NVARCHAR(100),
ID_Parent int
)

CREATE TABLE KhoaHoc
(
ID_KH INT NOT NULL PRIMARY KEY,
TEN_KH NVARCHAR(100),
NgayBatDau date,
NgayKetThuc date,
SoBuoiHoc char(10),
)

CREATE TABLE ChiTietBuoiHoc
(
ID_CTBH INT NOT NULL PRIMARY KEY,
GioVao Time,
GioRa Time,
NgayHoc Date,
SoLuongHocVien int,
SoGheConTrong CHAR (10)
)
ALTER TABLE HOCVIEN ADD ID_NTHV INT NOT NULL;
ALTER TABLE HOCVIEN ADD CONSTRAINT FK_HV_NTHV
FOREIGN KEY (ID_NTHV) REFERENCES NguoiThanHV(ID_NTHV);

ALTER TABLE HOCVIEN ADD ID_CTBH INT NOT NULL;
ALTER TABLE HOCVIEN ADD CONSTRAINT FK_HV_CTBH
FOREIGN KEY (ID_CTBH) REFERENCES ChiTietBuoiHoc(ID_CTBH);

ALTER TABLE PhongHoc ADD ID_CN INT NOT NULL;
ALTER TABLE PhongHoc ADD CONSTRAINT FK_PH_CN
FOREIGN KEY (ID_CN) REFERENCES ChiNhanh(ID_CN);

ALTER TABLE NHANVIEN ADD ID_Job INT NOT NULL;
ALTER TABLE NHANVIEN ADD CONSTRAINT FK_NV_CV
FOREIGN KEY (ID_Job) REFERENCES ChucVu(ID_Job);

ALTER TABLE ChiTietBuoiHoc ADD ID_NV INT NOT NULL;
ALTER TABLE ChiTietBuoiHoc ADD CONSTRAINT FK_CTBH_NV
FOREIGN KEY (ID_NV) REFERENCES NHANVIEN(ID_NV);

ALTER TABLE ChiTietBuoiHoc ADD ID_PH INT NOT NULL;
ALTER TABLE ChiTietBuoiHoc ADD CONSTRAINT FK_CTBH_PH
FOREIGN KEY (ID_PH) REFERENCES PhongHoc(ID_PH);

ALTER TABLE ChiTietBuoiHoc ADD ID_KH INT NOT NULL;
ALTER TABLE ChiTietBuoiHoc ADD CONSTRAINT FK_CTBH_KH
FOREIGN KEY (ID_KH) REFERENCES KhoaHoc(ID_KH);

ALTER TABLE ChucVu ADD ID_CN INT NOT NULL;
ALTER TABLE ChucVu ADD CONSTRAINT FK_CV_CN
FOREIGN KEY (ID_CN) REFERENCES ChiNhanh(ID_CN);

ALTER TABLE KhoaHoc ADD ID_CTH INT NOT NULL;
ALTER TABLE KhoaHoc ADD CONSTRAINT FK_KH_CTH
FOREIGN KEY (ID_CTH) REFERENCES ChuongTrinhHoc(ID_CTH);

CREATE TABLE LanThi
(
ID_LT INT NOT NULL PRIMARY KEY,
ID_HV INT NOT NULL,
ID_KH INT NOT NULL,
GVCoiThi_IDNV INT NOT NULL,
Diem FLOAT (2),
Ket_Qua bit,
NgayThi date,
FOREIGN KEY (ID_KH) REFERENCES KhoaHoc(ID_KH),
FOREIGN KEY (ID_HV) REFERENCES HOCVIEN(ID_HV),
FOREIGN KEY (GVCoiThi_IDNV) REFERENCES NHANVIEN(ID_NV)
)
